<div class="st-box" style="border: 1px solid gold; background: #fffdf0;">
    <span style="font-size: 0.75em; color: #b8860b;">★最終目標のヒント★</span><br>
    <span style="font-size: 0.85em;" id="st-hint">？？？？？？？？？？</span>
</div>

<script>
// refreshUI関数内に追加
function refreshUI() {
    // ...既存の処理...
    // ヒントの表示制御
    const hintEl = document.getElementById("st-hint");
    if (player.isEndless) {
        hintEl.innerText = "「★10遺物を手にし、魔神を一撃で葬る時、真の再起が訪れる……」";
    } else {
        hintEl.innerText = "？？？？？？？？？？";
    }
}

// attack関数内の討伐ロジックの修正
if(currentBossHP <= 0n) {
    if (startHP === maxHP) {
        const hasPandora = player.inventory[1001] > 0;
        if (hasPandora && !player.isEndless) {
            addLog(`<div class="clear-msg">【神域到達】魔神を一撃で粉砕しました。<br>全ての呪縛は霧散し、かつての力を取り戻した。</div>`);
            player.isEndless = true;
            currentBossHP = BOSS_MAX_HP_ENDLESS;
        } else if (!hasPandora) {
            addLog(`<span style="color:#e83e8c; font-weight:bold;">圧倒的な一撃！…だが、魔神の根源を断つための「匣」が足りない。</span>`);
            currentBossHP = maxHP;
        } else {
            addLog(`<span style="color:#ffd700; font-weight:bold;">虚無の残滓を圧倒した！</span>`);
            currentBossHP = maxHP;
        }
    } else {
        addLog(`<span style="color:#ffd700; font-weight:bold;">討伐成功！</span>`); 
        currentBossHP = maxHP; // 即座にHPをリセットして戦闘続行
    }
}
</script>

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RELICORE</title>
    <style>
        /* 2枚目のスクリーンショットに基づいた完全なデザイン再現 */
        body {
            background-color: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #game-container { width: 100%; max-width: 400px; }
        
        .title {
            font-size: 2.2rem;
            font-weight: 900;
            color: #FFD700;
            text-align: center;
            letter-spacing: 0.15em;
            margin: 40px 0;
        }

        .section-label {
            color: #888;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            text-transform: uppercase;
        }
        .section-label::before {
            content: "";
            display: inline-block;
            width: 4px;
            height: 20px;
            background-color: #FFD700;
            margin-right: 10px;
        }

        .panel {
            background-color: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        /* ステータスカードのレイアウト */
        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .stat-card {
            background-color: #111;
            padding: 15px;
            border-radius: 10px;
        }
        .stat-card.wide { grid-column: span 2; }
        .label { color: #555; font-size: 0.75rem; font-weight: bold; margin-bottom: 5px; display: block; }
        .value { font-size: 1.4rem; font-weight: bold; }

        /* 黄金のネオンボタン */
        .attack-button {
            width: 100%;
            background: linear-gradient(to bottom, #FFD700, #B8860B);
            color: #000;
            border: none;
            padding: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            transition: transform 0.1s;
        }
        .attack-button:active { transform: scale(0.98); }

        /* バトルログ */
        .log-container {
            background-color: #0a0a0a;
            border-radius: 12px;
            padding: 15px;
            height: 150px;
            overflow-y: auto;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column-reverse;
        }
        .log-entry { margin-bottom: 8px; border-bottom: 1px solid #1a1a1a; padding-bottom: 5px; }
        .log-red { color: #ff4d4d; }
        .log-yellow { color: #FFD700; }

        /* スキル・遺物リスト */
        .list-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; }
        .item-card { background: #111; padding: 10px; border-radius: 8px; font-size: 0.75rem; border: 1px solid #222; }
        .item-card.active { border-color: #FFD700; background: #221a00; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="title">RELICORE</div>

    <div class="section-label">STATUS</div>
    <div class="panel">
        <div class="stat-grid">
            <div class="stat-card">
                <span class="label">HP</span>
                <span id="hp-display" class="value">0</span>
            </div>
            <div class="stat-card">
                <span class="label">ATK</span>
                <span id="atk-display" class="value">0</span>
            </div>
            <div class="stat-card wide">
                <span class="label">REINCARNATION</span>
                <span id="reinc-display" class="value">0</span>
            </div>
        </div>
    </div>

    <button class="attack-button" onclick="battle()">魔神へ挑む</button>

    <div class="section-label">BATTLE LOG</div>
    <div class="panel">
        <div id="log-container" class="log-container"></div>
    </div>

    <div class="section-label">POWERS</div>
    <div class="panel">
        <div id="skill-list" class="list-grid"></div>
    </div>

    <div class="section-label">RELICS</div>
    <div class="panel">
        <div id="relic-list" class="list-grid"></div>
    </div>
</div>

<script>
// 保存キーとデータ構造
const SAVE_KEY = "relicore_save_data";
let gameData = {
    hp: 300, atk: 45, reinc: 1, relics: {}, skills: {}
};

// 本日確定した25スキル (覇王4: 種類数x0.2 等を反映)
const SKILL_MASTER = {
    "剣神": [{id:"k1", n:"一の太刀", d:"ATK+20%"}, {id:"k2", n:"心気一致", d:"種数で倍率UP"}, {id:"k3", n:"万象一掃", d:"再起数で倍率UP"}, {id:"k4", n:"天断の極意", d:"追撃100%"}, {id:"k5", n:"極限一閃", d:"最終x5.0"}],
    "不滅": [{id:"f1", n:"生命の根源", d:"HP+30%"}, {id:"f2", n:"再誕の輝き", d:"再起ボーナス1.5"}, {id:"f3", n:"不撓不屈", d:"HPでATK増"}, {id:"f4", n:"死の超越", d:"再起数で乗算"}, {id:"f5", n:"不滅の王土", d:"指数成長"}],
    "魔導": [{id:"m1", n:"魔力回路", d:"遺物+20%"}, {id:"m2", n:"魔力奔流", d:"全スキル1.5"}, {id:"m3", n:"理の解析", d:"ドロップ+1"}, {id:"m4", n:"古の叡智", d:"遺物1.2"}, {id:"m5", n:"真理の扉", d:"★5数で倍率"}],
    "覇王": [{id:"h1", n:"万軍の主", d:"★合計で加算"}, {id:"h2", n:"覇王の威光", d:"★6以上で倍率"}, {id:"h3", n:"統率の理", d:"★1-3を10倍"}, {id:"h4", n:"覇道の足跡", d:"種類数x0.2加算"}, {id:"h5", n:"終焉の号令", d:"全遺物1.5"}],
    "虚無": [{id:"n1", n:"忘却の彼方", d:"ATK+50%"}, {id:"n2", n:"深淵の理", d:"★100毎に倍率+1"}, {id:"n3", n:"残滓の追撃", d:"2回攻撃"}, {id:"n4", n:"無に帰す一撃", d:"再起/100加算"}, {id:"n5", n:"虚無の深淵", d:"最後にx3.0"}]
};

const RELICS = Array.from({length:53}, (_,i)=>({id:`r${i+1}`, n:`遺物 #${i+1}`, s: i<10?1:i<20?2:i<30?3:i<40?4:i<45?5:i<48?6:i<50?7:i<51?8:i<52?9:10}));

function init() {
    const s = localStorage.getItem(SAVE_KEY);
    if(s) gameData = JSON.parse(s);
    render();
}

function calculate() {
    let sb = gameData.skills["m2"] ? 1.5 : 1.0;
    let a = gameData.atk; let h = gameData.hp;
    if(gameData.skills["k1"]) a *= (1 + 0.2 * sb);
    if(gameData.skills["n1"]) a *= (1 + 0.5 * sb);
    if(gameData.skills["f1"]) h *= (1 + 0.3 * sb);

    let ra=0, rh=0, st=0, tc=0, hr=0;
    for(let id in gameData.relics) {
        const n = gameData.relics[id]; if(n<=0) continue;
        const r = RELICS.find(x=>x.id===id); tc++; st+=(r.s*n); if(r.s>=5) hr++;
        let p = r.s * n * 10;
        if(gameData.skills["h3"] && r.s<=3) p *= (10*sb);
        if(gameData.skills["h5"]) p *= (1.5*sb);
        if(gameData.skills["m4"]) p *= (1.2*sb);
        ra+=p; rh+=p*5;
    }
    if(gameData.skills["m1"]){ra*=1.2*sb; rh*=1.2*sb;}
    let curA = a + ra; let maxH = h + rh;
    if(gameData.skills["h1"]) curA += (st*100*sb);

    let m = 1.0;
    if(gameData.skills["k2"]) m += (tc*0.05*sb);
    if(gameData.skills["k3"]) m += (gameData.reinc*0.01*sb);
    if(gameData.skills["h2"]) m += (hr*0.5*sb);
    if(gameData.skills["h4"]) m += (tc*0.2*sb); // 覇道の足跡
    if(gameData.skills["n2"]) m += (Math.floor(st/100)*sb);
    if(gameData.skills["n4"]) m += (gameData.reinc/100*sb);

    if(gameData.skills["k5"]) m *= (5.0*sb);
    if(gameData.skills["n5"]) m *= (3.0*sb);

    let fA = curA * m;
    if(gameData.skills["n3"]) fA *= 2;
    if(gameData.skills["k4"]) fA *= 2;

    return {fA, maxH};
}

function render() {
    const s = calculate();
    document.getElementById('hp-display').innerText = Math.floor(s.maxH).toLocaleString();
    document.getElementById('atk-display').innerText = Math.floor(s.fA).toLocaleString();
    document.getElementById('reinc-display').innerText = gameData.reinc.toLocaleString();

    const sl = document.getElementById('skill-list'); sl.innerHTML = '';
    for(let g in SKILL_MASTER) SKILL_MASTER[g].forEach(sk=>{
        const d = document.createElement('div');
        d.className = `item-card ${gameData.skills[sk.id]?'active':''}`;
        d.innerHTML = `<strong>${sk.n}</strong><br>${sk.d}`;
        d.onclick = () => { gameData.skills[sk.id]=!gameData.skills[sk.id]; save(); render(); };
        sl.appendChild(d);
    });

    const rl = document.getElementById('relic-list'); rl.innerHTML = '';
    for(let id in gameData.relics) {
        const r = RELICS.find(x=>x.id===id);
        const d = document.createElement('div'); d.className='item-card';
        d.innerText = `★${r.s} ${r.n}`; rl.appendChild(d);
    }
}

function battle() {
    const s = calculate();
    log(`勇者の攻撃！ 魔神に ${Math.floor(s.fA).toLocaleString()} ダメージ！`);
    log(`<span class="log-red">勇者は力尽きた...</span>`);
    log(`<span class="log-yellow">再起の誓いによって新たなる力を得た</span>`);

    gameData.reinc++;
    let b = gameData.skills["f2"]?1.5:1.0;
    gameData.atk += 15*b; gameData.hp += 100*b;

    const r = RELICS[Math.floor(Math.random()*RELICS.length)];
    gameData.relics[r.id] = (gameData.relics[r.id]||0)+1;
    log(`遺物：[${r.n}] 獲得`);
    save(); render();
}

function log(m) {
    const l = document.getElementById('log-container');
    const d = document.createElement('div'); d.className='log-entry'; d.innerHTML = m;
    l.appendChild(d);
}

function save() { localStorage.setItem(SAVE_KEY, JSON.stringify(gameData)); }

init();
</script>
</body>
</html>
